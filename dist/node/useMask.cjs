"use strict";var e=require("react"),r=require("@react-input/core"),t=function(e,r){var t="".concat(e,"\n\n").concat(r,"\n");return new Error(t)};function n(e){for(var r,t=e.value,n=e.replacementChars,a=e.replacement,l=e.separate,o=n,c="",i=0;i<t.length;i++){var p=!Object.prototype.hasOwnProperty.call(a,t[i])&&(null===(r=a[o[0]])||void 0===r?void 0:r.test(t[i]));(l&&t[i]===o[0]||p)&&(o=o.slice(1),c+=t[i])}return c}function a(e,r,t){for(var n=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"],a="",l=0;l<e.length;l++){var o=Object.prototype.hasOwnProperty.call(r,e[l]),c=t?"(?!".concat(e[l],")"):"";0===l&&(a+="^"),a+=o?c+r[e[l]].toString().slice(1,-1):n.includes(e[l])?"\\".concat(e[l]):e[l],l===e.length-1&&(a+="$")}return a}function l(e,r){var t=r.mask,n=r.replacement,l=r.showMask,o=function(e,r){for(var t=r.mask,n=r.replacement,a=0,l="",o=0;o<t.length;o++)Object.prototype.hasOwnProperty.call(n,t[o])&&void 0!==e[a]?l+=e[a++]:l+=t[o];return l}(e,{mask:t,replacement:n}),c=function(e,r){var t=r.mask,n=r.replacement;return e.split("").map((function(e,r){return{type:Object.prototype.hasOwnProperty.call(n,e)?"replacement":e===t[r]?"mask":"input",value:e,index:r}}))}(o,{mask:t,replacement:n});if(!l){for(var i=-1,p=c.length-1;p>=0;p--)if("input"===c[p].type){i=c[p].index;break}o=o.slice(0,i+1)}var s=a(t,n,!1),u=a(t,n,!0);return{value:o,input:e,parts:c,pattern:s,isValid:RegExp(u).test(o)}}function o(e){for(var r=e.value,t=e.start,n=void 0===t?0:t,a=e.end,l=e.mask,o=e.replacement,c=e.separate,i=l.slice(n,a),p=r.slice(n,a),s="",u=0;u<i.length;u++){var v=Object.prototype.hasOwnProperty.call(o,i[u]);v&&void 0!==p[u]&&p[u]!==i[u]?s+=p[u]:v&&c&&(s+=i[u])}return s}var c=function(e){var r;return e.length>0?((r={})[e]=/./,r):{}};module.exports=function(a){var i=null!=a?a:{},p=i.mask,s=void 0===p?"":p,u=i.replacement,v=void 0===u?{}:u,d=i.showMask,h=void 0!==d&&d,f=i.separate,m=void 0!==f&&f,k=i.modify,g=i.onMask,y="string"==typeof v?c(v):v,w=e.useRef(null),b=JSON.stringify(y,(function(e,r){return r instanceof RegExp?r.toString():r})),O=e.useCallback((function(e){var r=e.controlled,t=e.initialValue;t=r||t?t:h?s:"";var n={mask:s,replacement:y,showMask:h,separate:m};return w.current={value:t,props:n,fallbackProps:n},{value:t}}),[]),C=e.useCallback((function(e){var t,a=e.inputType,i=e.addedValue,p=e.previousValue,u=e.changeStart,v=e.changeEnd;if(null===w.current)throw new r.SyntheticChangeError("The state has not been initialized.");w.current.value!==p?w.current.props=w.current.fallbackProps:w.current.fallbackProps=w.current.props;var d=o({value:p,end:u,mask:w.current.props.mask,replacement:w.current.props.replacement,separate:w.current.props.separate}),f=RegExp("[^".concat(Object.keys(w.current.props.replacement),"]"),"g"),g=w.current.props.mask.replace(f,"");if(d&&(d=n({value:d,replacementChars:g,replacement:w.current.props.replacement,separate:w.current.props.separate})),i&&(i=n({value:i,replacementChars:g.slice(d.length),replacement:w.current.props.replacement,separate:!1})),"insert"===a&&""===i)throw new r.SyntheticChangeError("The character does not match the key value of the `replacement` object.");var b=o({value:p,start:v,mask:w.current.props.mask,replacement:w.current.props.replacement,separate:w.current.props.separate});if(w.current.props.separate){var O=w.current.props.mask.slice(u,v).replace(f,""),C=O.length-i.length;C<0?b=b.slice(-C):C>0&&(b=O.slice(-C)+b)}b&&(b=n({value:b,replacementChars:g.slice(d.length+i.length),replacement:w.current.props.replacement,separate:w.current.props.separate}));var E=d+i+b,j=null!==(t=null==k?void 0:k(E))&&void 0!==t?t:{},x=j.mask,V=void 0===x?s:x,P=j.replacement,I=void 0===P?y:P,S=j.showMask,M=void 0===S?h:S,R=j.separate,T=void 0===R?m:R;"string"==typeof I&&(I=c(I));var z=l(E,{mask:V,replacement:I,showMask:M}),_=function(e){var r,t,n,a=e.inputType,l=e.value,o=e.addedValue,c=e.beforeChangeValue,i=e.parts,p=e.replacement,s=e.separate,u=i.filter((function(e){var r=e.type;return"input"===r||s&&"replacement"===r})),v=null===(r=u[c.length+o.length-1])||void 0===r?void 0:r.index,d=null===(t=u[c.length-1])||void 0===t?void 0:t.index,h=null===(n=u[c.length+o.length])||void 0===n?void 0:n.index;if("insert"===a){if(void 0!==v)return v+1;if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteForward"===a){if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteBackward"===a){if(void 0!==d)return d+1;if(void 0!==h)return h}var f=l.split("").findIndex((function(e){return Object.prototype.hasOwnProperty.call(p,e)}));return-1!==f?f:l.length}({inputType:a,value:z.value,addedValue:i,beforeChangeValue:d,parts:z.parts,replacement:I,separate:T});return w.current.value=z.value,w.current.props={mask:V,replacement:I,showMask:M,separate:T},{value:z.value,selectionStart:_,selectionEnd:_,__detail:z}}),[s,b,h,m,k]),E=r.useInput({init:O,tracking:C,customInputEventType:"input-mask",customInputEventHandler:g});return function(r){var n=r.inputRef,a=r.mask,l=r.replacement;e.useEffect((function(){var e,r,o;if("production"!==process.env.NODE_ENV){var c=null!==(o=null===(r=null===(e=n.current)||void 0===e?void 0:e._wrapperState)||void 0===r?void 0:r.initialValue)&&void 0!==o?o:"";c.length>a.length&&console.error(t("The initialized value of the `value` or `defaultValue` property is longer than the value specified in the `mask` property. Check the correctness of the initialized value in the specified property.",'Invalid value: "'.concat(c,'".')));var i=Object.keys(l).filter((function(e){return e.length>1}));i.length>0&&console.error(t("Object keys in the `replacement` property are longer than one character. Replacement keys must be one character long. Check the correctness of the value in the specified property.","Invalid keys: ".concat(i.join(", "),".")));var p=a.slice(0,c.length).split("").findIndex((function(e,r){var t=Object.prototype.hasOwnProperty.call(l,e),n=e!==c[r];return t?!!n&&!l[e].test(c[r]):n}));-1!==p&&console.error(t("An invalid character was found in the initialized property value `value` or `defaultValue` (index: ".concat(p,"). Check the correctness of the initialized value in the specified property."),'Invalid value: "'.concat(c,'".')))}}),[])}({inputRef:E,mask:s,replacement:y}),E};
